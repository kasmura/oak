<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href='https://fonts.googleapis.com/css?family=Architects+Daughter' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print" />

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <title>Oak by kasmura</title>
  </head>

  <body>
    <header>
      <div class="inner">
        <h1>Oak</h1>
        <h2>Anonymous and encrypted communication for node.js</h2>
        <a href="https://github.com/kasmura/oak" class="button"><small>View project on</small>GitHub</a>
      </div>
    </header>

    <div id="content-wrapper">
      <div class="inner clearfix">
        <section id="main-content">
          <h1>Oak</h1>

<p>Oak is Node.js project delivering an anonymous and secure network between nodes. It uses encrypted JSON-onions to make
all communication untracable and obscured.</p>

<p><strong>This is the planned result of oak:</strong></p>

<h3>Client</h3>

<div class="highlight"><pre><span class="kd">var</span> <span class="nx">client</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'oak'</span><span class="p">).</span><span class="nx">client</span><span class="p">();</span>
<span class="nx">client</span><span class="p">.</span><span class="nx">network</span> <span class="o">=</span> <span class="s1">'oak://127.0.0.1:4321'</span><span class="p">;</span>

<span class="nx">client</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">'connection'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">socket</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">socket</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">'news'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
    <span class="nx">socket</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">'myEvent'</span><span class="p">,</span> <span class="p">{</span> <span class="nx">my</span><span class="o">:</span> <span class="s1">'data'</span><span class="p">});</span>
  <span class="p">});</span>    
<span class="p">});</span>

<span class="nx">client</span><span class="p">.</span><span class="nx">connect</span><span class="p">(</span><span class="s1">'127.0.0.1:1234'</span><span class="p">);</span>
</pre></div>

<h3>Server</h3>

<div class="highlight"><pre><span class="kd">var</span> <span class="nx">server</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'oak'</span><span class="p">).</span><span class="nx">server</span><span class="p">();</span>
<span class="nx">server</span><span class="p">.</span><span class="nx">network</span> <span class="o">=</span> <span class="s1">'oak://127.0.0.1:4321'</span><span class="p">;</span>

<span class="nx">server</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">'connection'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">socket</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">socket</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">'news'</span><span class="p">,</span> <span class="p">{</span> <span class="nx">hello</span><span class="o">:</span> <span class="s1">'world'</span><span class="p">});</span>
  <span class="nx">socket</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">'myEvent'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">});</span>

<span class="nx">server</span><span class="p">.</span><span class="nx">listen</span><span class="p">(</span><span class="s1">'127.0.0.1:1234'</span><span class="p">)</span>
</pre></div>

<h2>Model</h2>

<h3>Router</h3>

<p>A oak-network consists of various routers that together enable a user of the network to anonymize and secure
his communication. It receives information and redirects it to the next router in the circuit.</p>

<h3>Directory-server</h3>

<p>The routers are connected to a central-server were they report that they are a part of the network.
This server is called a directory-server and has a list of the routers in the network. The client can connect to the
directory-server, and download the list to build a circuit from. Directory-servers are a tempory component of Oak
and should be replaced by a distributed list of routers, so that the network will be more balanced and secure.</p>

<h3>Circuit</h3>

<p>The client chooses random routers from the list, and builds a circuit through which the data can travel.
It exchanges keys with the routers in the circuit, and when the client has keys for all the routers, it can built
an onion-object when it wants to send data.</p>

<h3>Onion-objects</h3>

<p>An onion-object is data encrypted multiple times, so that each router decrypt the onion, thus metaphorically peeling
a layer of the onion, with his own key, and sends the rest down the circuit, until it reaches it's destination.</p>

<h2>Implementation</h2>

<p>The model described above, is what is trying to be implemented using node.js. Communication between clients and routers,
and routers and dir-server are TCP. For TCP the tcp.js library is used. Router-lists are served by the dir-server through
HTTP.</p>

<h2>Status</h2>

<h3>Done</h3>

<p>Client downloads router-list and builds circuit</p>

<p>Exchanging keys with all routers in circuit</p>

<h3>Currently</h3>

<p>Experimental communication with last-node</p>
        </section>

        <aside id="sidebar">
          <a href="https://github.com/kasmura/oak/zipball/master" class="button">
            <small>Download</small>
            .zip file
          </a>
          <a href="https://github.com/kasmura/oak/tarball/master" class="button">
            <small>Download</small>
            .tar.gz file
          </a>

          <p class="repo-owner"><a href="https://github.com/kasmura/oak"></a> is maintained by <a href="https://github.com/kasmura">kasmura</a>.</p>

          <p>This page was generated by <a href="pages.github.com">GitHub Pages</a> using the Architect theme by <a href="http://twitter.com/jasonlong">Jason Long</a>.</p>
        </aside>
      </div>
    </div>

  
  </body>
</html>